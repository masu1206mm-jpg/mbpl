<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>えむびーてぃーあいPlus</title>
  <meta name="description" content="えむびーてぃーあいPlus｜思考パターンを100問で詳細化する診断" />

  <style>
    :root{
      --bg0:#0b1020;
      --bg1:#0a0f1d;
      --card: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);

      --accent:#bda6ff;
      --accent2:#6ef2ff;
      --accent3:#ff7ca7;

      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --r: 22px;
      --max: 980px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", Arial;
      color: var(--text);
      background:
        radial-gradient(1100px 680px at 16% 8%, rgba(189,166,255,.20), transparent 60%),
        radial-gradient(900px 560px at 86% 12%, rgba(110,242,255,.16), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      padding: 18px;
    }

    .wrap{ max-width:var(--max); margin:0 auto; }

    /* ===== Header ===== */
    .top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:14px;
      margin-bottom:16px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .icon{
      width:44px;
      height:44px;
      border-radius:14px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      display:grid;
      place-items:center;
      color:#0b1020;
      font-weight:1000;
      box-shadow: var(--shadow);
    }

    .title{
      margin:0;
      font-size: clamp(22px, 4vw, 36px);
      font-weight:1000;
      line-height:1.1;
      background: linear-gradient(90deg, var(--accent3), var(--accent), var(--accent2));
      -webkit-background-clip:text;
      background-clip:text;
      color: transparent;
    }

    .subtitle{
      margin:4px 0 0;
      font-size:13px;
      color: var(--muted);
      max-width:42ch;
      line-height:1.6;
    }

    .pill{
      padding:8px 12px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      font-size:12px;
      color: var(--muted);
      white-space:nowrap;
    }

    /* ===== Card ===== */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border:1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding: 20px;
    }

    .hero{
      display:flex;
      flex-direction:column;
      gap:14px;
      margin-bottom:20px;
    }

    .hero h2{
      margin:0;
      font-size: clamp(18px, 3vw, 22px);
      font-weight:900;
      letter-spacing:.02em;
    }

    .hero p{
      margin:0;
      font-size:14px;
      line-height:1.7;
      color: var(--muted);
    }

    .hero p strong{
      color: var(--text);
      font-weight:700;
    }

    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
      margin-bottom:22px;
    }

    @media (max-width: 760px){
      .grid{ grid-template-columns:1fr; }
    }

    .panel{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      border-radius:18px;
      padding:14px;
    }

    .panel h3{
      margin:0 0 8px;
      font-size:14px;
      font-weight:800;
      letter-spacing:.03em;
    }

    .panel ul{
      margin:0;
      padding-left:18px;
      font-size:13px;
      line-height:1.7;
      color: var(--muted);
    }

    .panel p{
      margin:0;
      font-size:13px;
      line-height:1.7;
      color: var(--muted);
    }

    /* ===== Footer Controls ===== */
    .controls{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    .note{
      font-size:12px;
      color: rgba(255,255,255,.55);
      line-height:1.6;
      max-width:52ch;
    }

    .startBtn{
      padding:14px 22px;
      border-radius:999px;
      border:none;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      color:#0b1020;
      font-weight:1000;
      font-size:14px;
      cursor:pointer;
      box-shadow: 0 12px 30px rgba(110,242,255,.25);
    }

    .startBtn:hover{
      filter: brightness(1.05);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div>
        <div class="brand">
          <div class="icon">＋</div>
          <h1 class="title">えむびーてぃーあいPlus</h1>
        </div>
        <p class="subtitle">
          えむびーてぃーあいを拡張した、<br>
          思考パターン特化型・超詳細診断
        </p>
      </div>
      <div class="pill">スマホ対応 / 途中保存あり</div>
    </div>

    <div class="card">
      <div class="hero">
        <h2>えむびーてぃーあいPlusとは</h2>
        <p>
          えむびーてぃーあいPlusは、とある診断を<strong>強化・拡張</strong>した診断です。<br>
          性格を「雰囲気」ではなく、<strong>実際の行動・判断・反応</strong>から分析します。　
          ※とある診断よりも具体的かつ詳細になっております。
        </p>
        <p>
          高性能AIと行動心理・社会心理の研究をもとに、<br>
          あなたの<strong>思考パターン・価値観・人間関係のクセ</strong>を100問で詳細化します。
        </p>
      </div>

      <div class="grid">
        <div class="panel">
          <h3>診断の特徴</h3>
          <ul>
            <li>全100問・すべて具体的なシチュエーション</li>
            <li>「界隈 × タイプ名」で結果を立体的に表示</li>
            <li>最後の質問は40秒制限の特別設計</li>
            <li>結果は長文で深く読み込める構成</li>
          </ul>
        </div>

        <div class="panel">
          <h3>安心設計</h3>
          <ul>
            <li>途中保存あり（いつでも再開可能）</li>
            <li>1つ前の質問に戻って修正可能</li>
            <li>迷ったら中立でOK</li>
            <li>娯楽目的の診断（医療・心理判断ではありません）</li>
          </ul>
        </div>
      </div>

      <div class="controls">
        <p class="note">
          ※ 正解・不正解はありません。<br>
          よく見せようとせず、普段の自分に一番近い選択をしてください。
        </p>
        <button class="startBtn" onclick="alert('ここからPART2（質問編）に接続')">
          診断を開始する
        </button>
      </div>
    </div>
  </div>
</body>
</html>
<script>
/* =========================
   えむびーてぃーあいPlus - PART2
   質問100問 / シャッフル / 保存 / 戻る
========================= */

(function(){

/* =========================
   基本設定
========================= */
const STORAGE_KEY = "mbti_plus_part2";

const $ = (id) => document.getElementById(id);

/* =========================
   質問データ（100問）
========================= */

/*
  cat:
  SNS   = SNS・承認欲求界隈
  GLAM  = 夜職・盛り・自己価値界隈
  GACHI = メガネ真面目くん界隈
  LOVE  = 恋愛至上主義界隈
  KAGE  = 自分を持ってるインキャラ界隈
*/

const QUESTIONS_RAW = [

/* ===== SNS界隈 1-20 ===== */
{cat:"SNS", q:"バズっている投稿を見ると、いいね数やコメント数を必ず確認する", a:"ほぼ見ない", b:"たまに見る", c:"必ずチェックする"},
{cat:"SNS", q:"自分の投稿の反応が少ないと少し落ち込む", a:"全く気にならない", b:"少し気になる", c:"かなり気になる"},
{cat:"SNS", q:"ストーリーを上げた後、誰が見たか確認する", a:"確認しない", b:"たまに確認", c:"必ず確認"},
{cat:"SNS", q:"友達の投稿が伸びていると理由を考える", a:"考えない", b:"少し考える", c:"分析する"},
{cat:"SNS", q:"SNSでの自分の立ち位置を意識している", a:"意識しない", b:"たまに意識", c:"常に意識"},
{cat:"SNS", q:"炎上している話題を最初から追ってしまう", a:"追わない", b:"気になる時だけ", c:"最後まで追う"},
{cat:"SNS", q:"フォロワー数で人の影響力を判断してしまう", a:"しない", b:"少しある", c:"よくある"},
{cat:"SNS", q:"投稿する時間帯を気にする", a:"気にしない", b:"たまに", c:"かなり気にする"},
{cat:"SNS", q:"SNSで承認されていないと不安になる", a:"ならない", b:"少しなる", c:"よくなる"},
{cat:"SNS", q:"他人の投稿に無意識で比較してしまう", a:"しない", b:"たまに", c:"よくする"},
{cat:"SNS", q:"バズっている理由を考えるのが好きだ", a:"興味ない", b:"少し好き", c:"かなり好き"},
{cat:"SNS", q:"自分の発言がどう受け取られるか気になる", a:"気にしない", b:"少し気にする", c:"かなり気にする"},
{cat:"SNS", q:"SNSの数字は自分の評価だと感じる", a:"思わない", b:"少し思う", c:"強く思う"},
{cat:"SNS", q:"裏垢やコメント欄で意見を書くことがある", a:"ほぼない", b:"たまにある", c:"よくある"},
{cat:"SNS", q:"他人の炎上を見て学ぼうとする", a:"しない", b:"少しする", c:"かなりする"},
{cat:"SNS", q:"自分の投稿を何度も見返す", a:"見返さない", b:"1回は見る", c:"何度も見る"},
{cat:"SNS", q:"いいね数が少ないと投稿を消したくなる", a:"ならない", b:"少し思う", c:"消したくなる"},
{cat:"SNS", q:"自撮りを投稿することがある", a:"ほぼない", b:"たまに", c:"よくある"},
{cat:"SNS", q:"SNSがないと情報に遅れると感じる", a:"感じない", b:"少し感じる", c:"かなり感じる"},
{cat:"SNS", q:"SNSはいかに反応を取るかが重要だ", a:"思わない", b:"まあ思う", c:"強く思う"},

/* ===== GLAM界隈 21-40 ===== */
{cat:"GLAM", q:"見た目は努力でどうにかなると思う", a:"思わない", b:"半分思う", c:"強く思う"},
{cat:"GLAM", q:"第一印象で損したくない", a:"気にしない", b:"少し気にする", c:"絶対損したくない"},
{cat:"GLAM", q:"ナメられたと感じると強く反発したくなる", a:"ならない", b:"少しなる", c:"かなりなる"},
{cat:"GLAM", q:"可愛い・かっこいいと言われると自信が出る", a:"変わらない", b:"少し出る", c:"かなり出る"},
{cat:"GLAM", q:"自分を安売りしても欲しいものがある", a:"ない", b:"場合による", c:"ある"},
{cat:"GLAM", q:"整形は努力だと思う", a:"思わない", b:"場合による", c:"思う"},
{cat:"GLAM", q:"プライドは高い方だ", a:"低い", b:"普通", c:"高い"},
{cat:"GLAM", q:"他人にどう見られているか常に気になる", a:"気にならない", b:"たまに", c:"常に"},
{cat:"GLAM", q:"ブランドや肩書きに価値を感じる", a:"感じない", b:"少し感じる", c:"強く感じる"},
{cat:"GLAM", q:"自分より下だと感じる人を見ると安心する", a:"しない", b:"少しある", c:"ある"},
{cat:"GLAM", q:"見た目にお金をかけるのは正解だと思う", a:"思わない", b:"まあ思う", c:"思う"},
{cat:"GLAM", q:"異性に舐められたくない気持ちが強い", a:"弱い", b:"普通", c:"強い"},
{cat:"GLAM", q:"外見で評価される世界は残酷だと思う", a:"思わない", b:"少し思う", c:"強く思う"},
{cat:"GLAM", q:"自分を高く見せるのは悪いことじゃない", a:"悪い", b:"場合による", c:"悪くない"},
{cat:"GLAM", q:"お金＝自由だと感じる", a:"思わない", b:"少し思う", c:"強く思う"},
{cat:"GLAM", q:"負け組だと思われたくない", a:"思わない", b:"少し思う", c:"強く思う"},
{cat:"GLAM", q:"自分の価値は環境で決まると思う", a:"思わない", b:"半分思う", c:"思う"},
{cat:"GLAM", q:"強い人間に憧れる", a:"憧れない", b:"少し", c:"かなり"},
{cat:"GLAM", q:"上下関係を意識するタイプだ", a:"しない", b:"少し", c:"かなり"},
{cat:"GLAM", q:"勝ち負けで物事を見てしまう", a:"見ない", b:"たまに", c:"よく見る"},

/* ===== GACHI界隈 41-60 ===== */
{cat:"GACHI", q:"約束の時間は必ず守る", a:"守らない", b:"基本守る", c:"絶対守る"},
{cat:"GACHI", q:"段取りが崩れるとイライラする", a:"しない", b:"少しする", c:"かなりする"},
{cat:"GACHI", q:"ミスをすると原因を考える", a:"考えない", b:"少し考える", c:"徹底的に考える"},
{cat:"GACHI", q:"無責任な人を見ると腹が立つ", a:"立たない", b:"少し立つ", c:"かなり立つ"},
{cat:"GACHI", q:"LINEの誤字脱字が気になる", a:"気にならない", b:"少し", c:"かなり"},
{cat:"GACHI", q:"計画通りに進めたい", a:"気にしない", b:"まあ", c:"強く思う"},
{cat:"GACHI", q:"損得を計算して行動する", a:"しない", b:"少し", c:"かなり"},
{cat:"GACHI", q:"コツコツ積み上げるのが得意だ", a:"苦手", b:"普通", c:"得意"},
{cat:"GACHI", q:"ルールは守るべきだと思う", a:"思わない", b:"場合による", c:"思う"},
{cat:"GACHI", q:"感情より合理性を優先する", a:"しない", b:"半々", c:"する"},
{cat:"GACHI", q:"遅刻する人が苦手だ", a:"気にならない", b:"少し", c:"かなり"},
{cat:"GACHI", q:"先のリスクを考えて動く", a:"考えない", b:"少し", c:"かなり"},
{cat:"GACHI", q:"無駄な出費は避けたい", a:"避けない", b:"少し避ける", c:"かなり避ける"},
{cat:"GACHI", q:"正しいことをしたい気持ちが強い", a:"弱い", b:"普通", c:"強い"},
{cat:"GACHI", q:"責任ある立場を任されることが多い", a:"ない", b:"たまに", c:"よくある"},
{cat:"GACHI", q:"自分に厳しい方だ", a:"甘い", b:"普通", c:"厳しい"},
{cat:"GACHI", q:"再発防止を考える癖がある", a:"ない", b:"少し", c:"かなり"},
{cat:"GACHI", q:"他人のミスが気になる", a:"気にならない", b:"少し", c:"かなり"},
{cat:"GACHI", q:"長期目線で物事を見る", a:"見ない", b:"半々", c:"見る"},
{cat:"GACHI", q:"感情論より理屈が好きだ", a:"好きじゃない", b:"普通", c:"好き"},

/* ===== LOVE界隈 61-80 ===== */
{cat:"LOVE", q:"恋愛は人生に大きく影響する", a:"影響しない", b:"少しする", c:"かなりする"},
{cat:"LOVE", q:"恋人とは一体感を求めたい", a:"求めない", b:"場合による", c:"求めたい"},
{cat:"LOVE", q:"曖昧な関係は不安になる", a:"ならない", b:"少し", c:"かなり"},
{cat:"LOVE", q:"返信速度で愛情を測る", a:"測らない", b:"たまに", c:"測る"},
{cat:"LOVE", q:"恋人の交友関係が気になる", a:"気にならない", b:"少し", c:"かなり"},
{cat:"LOVE", q:"束縛されると愛を感じる", a:"感じない", b:"少し", c:"感じる"},
{cat:"LOVE", q:"相手に依存しやすい", a:"しない", b:"たまに", c:"しやすい"},
{cat:"LOVE", q:"相手の言動に一喜一憂する", a:"しない", b:"少し", c:"かなり"},
{cat:"LOVE", q:"恋人が最優先になりやすい", a:"ならない", b:"たまに", c:"なりやすい"},
{cat:"LOVE", q:"ニコイチの存在になりたい", a:"なりたくない", b:"どちらでも", c:"なりたい"},
{cat:"LOVE", q:"安心感がないと不安になる", a:"ならない", b:"少し", c:"かなり"},
{cat:"LOVE", q:"嫉妬しやすい", a:"しない", b:"たまに", c:"しやすい"},
{cat:"LOVE", q:"恋人の行動を把握したい", a:"したくない", b:"ほどほど", c:"把握したい"},
{cat:"LOVE", q:"恋愛で生活が乱れることがある", a:"ない", b:"たまに", c:"ある"},
{cat:"LOVE", q:"恋人の存在が心の支えだ", a:"そうでもない", b:"まあ", c:"強くそう思う"},
{cat:"LOVE", q:"恋愛に全力になりやすい", a:"ならない", b:"たまに", c:"なりやすい"},
{cat:"LOVE", q:"一人になるのが怖い", a:"怖くない", b:"少し", c:"怖い"},
{cat:"LOVE", q:"恋人の一言で気分が変わる", a:"変わらない", b:"少し", c:"かなり"},
{cat:"LOVE", q:"恋愛がうまくいかないと全てがダメに感じる", a:"感じない", b:"少し", c:"感じる"},
{cat:"LOVE", q:"恋愛は自分を成長させると思う", a:"思わない", b:"少し思う", c:"思う"},

/* ===== KAGE界隈 81-99 ===== */
{cat:"KAGE", q:"一人の時間がないと疲れる", a:"疲れない", b:"少し", c:"かなり"},
{cat:"KAGE", q:"群れるより少人数が楽だ", a:"楽じゃない", b:"半々", c:"楽"},
{cat:"KAGE", q:"学生時代、群れている人が苦手だった", a:"苦手じゃない", b:"少し", c:"苦手"},
{cat:"KAGE", q:"自分の世界を大事にしたい", a:"気にしない", b:"まあ", c:"大事にしたい"},
{cat:"KAGE", q:"無理にテンションを上げたくない", a:"上げる", b:"場合による", c:"上げたくない"},
{cat:"KAGE", q:"静かな場所が落ち着く", a:"落ち着かない", b:"普通", c:"落ち着く"},
{cat:"KAGE", q:"人に踏み込まれすぎるとしんどい", a:"平気", b:"少し", c:"しんどい"},
{cat:"KAGE", q:"自分のペースを乱されたくない", a:"気にしない", b:"少し", c:"乱されたくない"},
{cat:"KAGE", q:"感情をあまり表に出さない", a:"出す", b:"場合による", c:"出さない"},
{cat:"KAGE", q:"深く狭い人間関係が好きだ", a:"広く浅く", b:"半々", c:"深く狭く"},
{cat:"KAGE", q:"空気を読むより距離を取る", a:"空気読む", b:"半々", c:"距離取る"},
{cat:"KAGE", q:"無駄な人間関係を減らしたい", a:"減らしたくない", b:"まあ", c:"減らしたい"},
{cat:"KAGE", q:"一人で考える時間が必要だ", a:"必要ない", b:"たまに", c:"必要"},
{cat:"KAGE", q:"自分の価値観を曲げたくない", a:"曲げられる", b:"場合による", c:"曲げたくない"},
{cat:"KAGE", q:"人付き合いは消耗することが多い", a:"消耗しない", b:"少し", c:"かなり"},
{cat:"KAGE", q:"自分の居場所は少数でいい", a:"そう思わない", b:"少し思う", c:"思う"},
{cat:"KAGE", q:"騒がしい場所は苦手だ", a:"苦手じゃない", b:"少し", c:"苦手"},
{cat:"KAGE", q:"一人でいるときが一番素だ", a:"そうでもない", b:"半々", c:"そう"},
{cat:"KAGE", q:"人と距離を取るのは悪いことじゃない", a:"思わない", b:"少し思う", c:"思う"},

];

/* ===== 100問目（固定） ===== */
const FINAL_QUESTION = {
  q: `最後の質問です。

あなたの目の前に、ひとつのボタンがあります。
そのボタンを渡せば、あなたの大切な友達は1億円を手に入れます。

ただし、あなたはこの世界から消えます。

それでも、このボタンを渡しますか？`,
  a: "渡す",
  b: "渡さない"
};

/* =========================
   シャッフル処理
========================= */
function shuffle(array){
  const arr = array.slice();
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

/* =========================
   状態管理
========================= */
let state = {
  order: [],
  idx: 0,
  answers: [],
  scores: {SNS:0, GLAM:0, GACHI:0, LOVE:0, KAGE:0}
};

function save(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}
function load(){
  const raw = localStorage.getItem(STORAGE_KEY);
  if(raw){
    state = JSON.parse(raw);
    return true;
  }
  return false;
}

/* =========================
   描画
========================= */
function render(){
  const qEl = $("qText");
  const cEl = $("choices");
  const stepEl = $("stepText");
  const barEl = $("barFill");

  stepEl.textContent = `Q${state.idx + 1} / 100`;
  barEl.style.width = `${(state.idx / 100) * 100}%`;

  cEl.innerHTML = "";

  if(state.idx < 99){
    const q = QUESTIONS[state.order[state.idx]];
    qEl.textContent = q.q;

    [
      {t:"否定", txt:q.a, v:-1},
      {t:"中立", txt:q.b, v:0},
      {t:"肯定", txt:q.c, v:1},
    ].forEach(o=>{
      const btn = document.createElement("button");
      btn.className = "btn";
      btn.innerHTML = `<span class="tag">${o.t}</span><div class="btnText">${o.txt}</div>`;
      btn.onclick = ()=>answer(o.v, q.cat);
      cEl.appendChild(btn);
    });

  }else{
    qEl.textContent = FINAL_QUESTION.q;
    [
      {t:"A", txt:FINAL_QUESTION.a, v:0},
      {t:"B", txt:FINAL_QUESTION.b, v:1},
    ].forEach(o=>{
      const btn = document.createElement("button");
      btn.className = "btn";
      btn.innerHTML = `<span class="tag">${o.t}</span><div class="btnText">${o.txt}</div>`;
      btn.onclick = ()=>finalAnswer(o.v);
      cEl.appendChild(btn);
    });
  }
}

function answer(val, cat){
  state.answers[state.idx] = val;
  state.scores[cat] += val;
  state.idx++;
  save();
  render();
}

function finalAnswer(val){
  state.answers[99] = val;
  save();
  alert("ここからPART3（結果編）へ");
}

/* =========================
   初期化
========================= */
let QUESTIONS = [];

function init(){
  if(!load()){
    state.order = shuffle([...Array(99).keys()]);
    save();
  }
  QUESTIONS = QUESTIONS_RAW;
  render();
}

$("backBtn").onclick = ()=>{
  if(state.idx > 0){
    state.idx--;
    save();
    render();
  }
};

$("skipBtn").onclick = ()=>{
  answer(0, QUESTIONS[state.order[state.idx]].cat);
};

$("startBtn") && $("startBtn").addEventListener("click", ()=>{
  $("screenIntro").classList.add("hide");
  $("screenQuiz").classList.remove("hide");
  init();
});

init();

})();
</script>
