// --- EXTENSIONオブジェクトに職業データを追加 ---
// ※既存のEXTENSION内のテキストの後に、以下のjobsデータを追加または統合してください

const JOB_DB = {
  "SNS": {
    "GLAM": { yes: "インフルエンサー, ライブコメディアン, 美容系YouTuber, ブランドアンバサダー, 港区系ライター, 広告モデル, PRプランナー, イベントオーガナイザー, 美容外科プロモーター, ナイトレジャー系メディア運営", no: "工場ライン作業, 黙々と行うデータ入力, 陽の当たらない倉庫管理, 変化のない地方公務員事務" },
    "GACHI": { yes: "SNSデータアナリスト, 危機管理広報, コンプライアンス担当, WEBディレクター, 運用代行コンサルタント, 調査報道記者, 統計調査員, デジタルマーケティング戦略立案, 編集者, 情報セキュリティ担当", no: "行き当たりばったりの路上パフォーマー, 感情労働中心の接客, 計画性のないベンチャー企業" },
    "LOVE": { yes: "マッチングアプリ運営, 恋愛コラムニスト, 結婚相談所アドバイザー, コミュニティマネージャー, ファンクラブ運営, カスタマーサクセス, 心理カウンセラー(SNS相談), 育児系ブロガー, 癒やし系配信者", no: "ノルマ第一の飛び込み営業, 冷徹なリストラ担当, 孤独な深夜警備員" },
    "KAGE": { yes: "VTuberの中の人, 匿名アルファツイッタラー, 構成作家, WEBデザイン, 動画編集者, SEOライター, シナリオライター, ネットリサーチ, 在宅データ分析, 特定分野の専門ブロガー", no: "顔出し必須の街頭インタビュー, 体育会系のチーム営業, 大人数での司会業" }
  },
  "GLAM": {
    "SNS": { yes: "ファッション誌モデル, 美容インフルエンサー, ラグジュアリーブランド販売, 芸能マネージャー, ショーダンサー, TVタレント, 広告キャスティング, 化粧品開発プロデューサー, 撮影スタジオ経営", no: "地味な清掃業務, 制服が指定された一般事務, 名前が出ない裏方作業" },
    "GACHI": { yes: "美容クリニック経営者, エステサロンオーナー, 不動産鑑定士, 外資系コンサルタント, 秘書室長, 投資家, 高級車ディーラー, 宝石鑑定士, マナー講師, 政治家秘書", no: "ボランティアスタッフ, 利益を度外視した福祉活動, 規律のないフリーター生活" },
    "LOVE": { yes: "高級クラブキャスト, ラウンジ経営, ブライダルプロデューサー, 心理セラピスト, 顧客管理マネージャー, 接待専門の営業職, VIPアテンダント, 癒やし系サロン経営, ファッションアドバイザー", no: "感情を殺す工場勤務, 孤独なプログラミング, 数字だけの証券アナリスト" },
    "KAGE": { yes: "ハイエンド専門の職人, 彫金師, デザイナー, 専属メイクアップアーティスト, 骨董鑑定士, 芸術家, 建築家, 衣装制作, フリーランスの美容師, プライベートサロン経営", no: "大衆向けの量販店スタッフ, 常に電話が鳴り止まないコールセンター, チームプレイ必須の部活動" }
  },
  "GACHI": {
    "SNS": { yes: "ITコンサルタント, プロジェクトマネージャー, WEBニュース編集長, ネットリテラシー講師, 官公庁の広報, データ解析専門家, テック系ライター, デジタル庁職員, 証券アナリスト", no: "根性論の営業会社, 毎日ルールが変わる職場, 飲み会が仕事の一部のような環境" },
    "GLAM": { yes: "弁護士, 裁判官, 銀行員, 監査役, 税理士, 経営コンサルタント, 医者, 外科医, パイロット, 法執行機関の幹部候補, 財務担当理事", no: "日雇い労働, 成果が不透明なクリエイティブ職, 掃除や片付けができない職場" },
    "LOVE": { yes: "公務員(窓口以外), 図書館司書, 大学教授, 薬剤師, 福祉施設管理者, ケアマネージャー, 保険数理士, 塾講師, 教科書作成者, 遺言信託業務", no: "常にクレーム対応がある仕事, 水商売, 浮き沈みが激しい芸能界" },
    "KAGE": { yes: "研究者, プログラマー, 翻訳家, 校正者, 整備士, アーキテクト, 特許事務所, アーキビスト, 気象予報士, システム保守, 治験管理", no: "接客販売全般, 飛び込み営業, 大人数をまとめるリーダー" }
  },
  "LOVE": {
    "SNS": { yes: "SNSカウンセラー, 恋愛メディア編集者, 婚活パーティー運営, ベビーシッター, 児童福祉職, 心理テスト作家, ライフスタイル系Vlogger, ペット関連サービス", no: "数字だけを追う営業, 孤独なプログラミング, 冷徹な法執行官" },
    "GLAM": { yes: "キャバ嬢・ホスト(売れっ子), 専属スタイリスト, ホスピタリティ講師, 観光ガイド, 花屋, ケーキ屋, エステティシャン, パーソナルカラー診断士, パーソナルトレーナー", no: "地味な事務作業, 倉庫内軽作業, 変化のない公務員" },
    "GACHI": { yes: "看護師, 保育士, 小学校教師, 介護福祉士, 助産師, 精神保健福祉士, 宗教家, 保護司, 少年院教官, 献身的な秘書", no: "株のデイトレーダー, 実力主義の不動産営業, ギャンブル関連" },
    "KAGE": { yes: "在宅カウンセラー, 占い師, 小説家, 詩人, 脚本家, 陶芸家, 手芸作家, 庭師, 在宅介護支援, 匿名メール相談", no: "大勢の前でのプレゼンが続く仕事, 体育会系の職場, 激しい競争社会" }
  },
  "KAGE": {
    "SNS": { yes: "ブロガー, アフィリエイター, 動画クリエイター, 掲示板管理人, ネット小説家, イラストレーター, アプリ開発者, サーバーエンジニア, ゲームデバッガー", no: "店頭販売, 路上キャッチ, 司会業" },
    "GLAM": { yes: "現代アーティスト, 空間デザイナー, Web制作(ハイエンド), 写真家, 映像作家, 文筆家, 独立系キュレーター, アンティークディーラー, 音楽プロデューサー", no: "ユニフォーム着用必須の職場, 組織の歯車的な事務, 呼び込み" },
    "GACHI": { yes: "回路設計, 化学研究者, 考古学者, 伝統工芸職人, 修復師, 論文校閲, 書店員, 倉庫管理システム構築, サーバー保守, 測量士", no: "営業全般, 司会, 宴会芸が求められる職場" },
    "LOVE": { yes: "在宅翻訳, 児童書作家, 盆栽師, アクアリウム制作, 独立系カウンセラー, 植物園職員, 野鳥観測, 在宅専門の校正, 通信制教育の添削", no: "ノルマが厳しい営業, 24時間対応のコールセンター, 騒々しい職場" }
  }
};

// --- showResult関数の中身を以下のように書き換え ---

function showResult() {
  document.getElementById('screen-quiz').classList.add('hide');
  document.getElementById('screen-result').classList.remove('hide');
  
  const sortedKeys = Object.keys(state.scores).sort((a,b) => state.scores[b] - state.scores[a]);
  const top = sortedKeys[0];
  const sub = sortedKeys[1];
  
  const topScore = state.scores[top];
  const catData = MASTER[top];
  const pattern = catData.patterns.find(p => topScore >= p.min);

  document.getElementById('res-area').textContent = catData.area;
  document.getElementById('res-type').textContent = pattern.type;
  
  const extThinking = (EXTENSION[top] && EXTENSION[top][sub]) ? EXTENSION[top][sub] : "";

  // 職業データの動的取得
  let finalJobsYes = pattern.jobYes;
  let finalJobsNo = pattern.jobNo;

  if (JOB_DB[top] && JOB_DB[top][sub]) {
      finalJobsYes = JOB_DB[top][sub].yes; // 1位×2位の組み合わせで上書き
      finalJobsNo = JOB_DB[top][sub].no;
  }

  document.getElementById('res-thinking').textContent = pattern.thinking + extThinking;
  document.getElementById('res-love').textContent = pattern.love;
  document.getElementById('res-job-yes').textContent = finalJobsYes; // 書き換え
  document.getElementById('res-job-no').textContent = finalJobsNo;   // 書き換え
  document.getElementById('res-levelup').textContent = pattern.levelup;

  // (以下、運命のボタン判定ロジックは変更なし)
  // ...
}
